<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Bootstrap 4 Accordion with Plus Minus Icons</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/rowreorder/1.2.6/css/rowReorder.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/rowreorder/1.2.6/js/dataTables.rowReorder.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>







<style>
    .bs-example{
        margin: 20px;
    }
    .accordion .fa{
        margin-right: 0.5rem;
    }
</style>
 </head>
<body>
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Add Attribute
  </button>
  
  
  <div class="bs-example">
    <div class="accordion" id="accordionExample">
      
    </div>
  </div>

<button id="addRow">Add Row</button>
  <table  id="example" class="table table-striped table-bordered" style="width:100%">
    <thead>
      <tr>
        <th>Attribute Name</th>
        <th>Label</th>
        <th>Data Type</th>
        <th> Active</th>
        <th> Tabular</th>
        <th>Pair Name</th>
        <th> search</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        
        <td>Sans</td>
        <td>dhife</td>
        <td>String</td>
        <td>Yes</td>
        <td>Yes</td>
        <td>No</td>
        <td>No</td>
      </tr>
     
    </tbody>
  </table>

  
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">Attribute Name</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="" class="form-label">Tabular Name</label>
                                <input type="text" class="form-control" id="tabular_name" placeholder="Tabular Name"> 
                            </div>
                            <form action="" id="fieldinfoform">
                            <h5 class="modal-title" id="field_information">Field Information</h5>
                          <div class="row form-inline">
                          
                          <div class="form-group">
                            <input type="text" class="form-control" id="attribute_name" placeholder="Attribute Name">
                        </div>
                          <div class="form-group">
                              <input type="text" class="form-control" id="label_name" placeholder="Label Name">
                        </div>
                        <div class="form-group ">
                              <select class="form-control" id="data_type" name="data_type">
                                 <option value="">Data Type</option>
                                  <option value="String">String</option>
                                  <option value="Number">Number</option>
                                  <option value="Boolean">Thre</option>
                                  <option value="Custom">Three</option>
                                </select>
                        </div>
                        <div class="form-group ">
                              
                              <select class="form-control" id="active" name="active">
                                <option value="">Active</option>
                                  <option value="Y">Yes</option>
                                  <option value="N">No</option>
                                
                                </select>
                          </div>
                          
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        
                                </div>     
                                <div class="form-group col-md-6 text-right">
                                    <button type="button" class="btn btn-secondary" id="addfieldinfo">Add Info</button>

                                </div>
                          </div>
                        </form>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" id="addbtn" data-dismiss="modal">Add</button>
                          <button type="button" class="btn btn-primary">Save changes</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                  
              </body>
              </html>                            
                                      <script>
                                          $(document).ready(function(){
                                              // Add minus icon for collapse element which is open by default
                                              $(".collapse.show").each(function(){
                                                $(this).prev(".card-header").find(".fa").addClass("fa-minus").removeClass("fa-plus");
                                              });
                                              
                                              // Toggle plus minus icon on show hide of collapse element
                                              $(".collapse").on('show.bs.collapse', function(){
                                                $(this).prev(".card-header").find(".fa").removeClass("fa-plus").addClass("fa-minus");
                                              }).on('hide.bs.collapse', function(){
                                                $(this).prev(".card-header").find(".fa").removeClass("fa-minus").addClass("fa-plus");
                                              });
                                          });
                                      
                                          $(document).ready(function(){
                                              var i=1;
                                              $('#addbtn').on("click",function(){
                                                 let name= $("#tabular_name").val();
        
          var paneltemplate=' <div class="card">'+
    ' <div class="card-header" id="heading'+ i+'">'+

    ' <h2 class="mb-0">'+
    '<button type="button" class="btn btn-link" data-toggle="collapse" data-target="#collapse'+i +'"><i class="fa fa-plus"></i> '+name+'</button>'+									
    '</h2>'+
    '</div>'+
    '<div id="collapse'+i +'" class="collapse" aria-labelledby="heading'+i +'" data-parent="#accordionExample">'+
    '<div class="card-body">'+
      '<button id="tabular_btn'+i+'">Add Row</button>'
      '<table  id="tabular_table'+i+'" class="table table-striped table-bordered" style="width:100%">'+
    '<thead>'+
    '<tr>'+
    '<th>Attribute Name</th>'+'<th>Label</th>'+
    '<th>Data Type</th>'+
    '<th> Active</th>'+
    '<th> Tabular</th>'+
    '<th>Pair Name</th>'+
    '<th> search</th>'+
    '</tr>'+
    '</thead>'+
    '<tbody>'+
'<tr>'+

'<td>Sans</td>'+
'<td>dhife</td>'+
'<td>String</td>'+
'<td>Yes</td>'+
'<td>Yes</td>'+
'<td>No</td>'+
'<td>No</td>'+
'</tr>'+
    '</tbody>'+
    '</table>'+
                
    '</div>'+
    '</div>'+
    '</div>'+
          
    '</div>';
                                       $("#accordionExample").append(paneltemplate);
                                       $('#tabular_table'+i).DataTable(
                                        {
                                          rowReorder: {
                                              selector: 'td:nth-child(2)'
                                          },
                                          responsive: true
                                        }
                                       );
                                                  i++;
                                              });
                                              var counter=1;

                                      
                                      
                                          });
      
      // Data table
       $(document).ready(function() {
    var table = $('#example').DataTable( {
        rowReorder: {
            selector: 'td:nth-child(2)'
        },
        responsive: true
    } );
      var counter = 1;
 
    $('#addRow').on( 'click', function () {
      table.row.add( [
           '<input type="text" id="R_' + counter + '_1" />',
           '<input type="text" id="R_' + counter + '_2" />',
           '<input type="text" id="R_' + counter + '_3" />',
           '<input type="text" id="R_' + counter + '_4" />',
           '<input type="text" id="R_' + counter + '_5" />',
           '<input type="text" id="R_' + counter + '_6" />',
           '<input type="text" id="R_' + counter + '_7" />',
        ] ).draw( false );
 
        counter++;
    } );
 
    // Automatically add a first row of data
    $('#addRow').click();
} );
                                      </script>
                                     